# Java 7에 추가된 것들에는?

## Fork/Join은 CPU를 더 효율적으로 사용하기 위해 만들어진 거예요

**Fork**
- Fork란 작업을 여러개로 나누는 것을 의미한다.

**Join**
- Join이란 여러개로 나뉜 작업의 결과를 하나로 합치는 것을 의미한다. 

**Work stealing**
> Work Stealing이란 처리할 작업을 담아둔 Queue에 담긴 작업들을 적절히 할당하기 위한 개념이다

Java에서는 Dequeue에 작업을 담아놓고 처리한다. 3개의 Dequeue가 있다고 가정했을 때  
2개의 큐보다 하나의 큐가 비교적 한가할 때 바쁜 큐의 작업을 비교적 한가한 큐에 담아 처리하는 것을 의미한다.  
`Work stealing`이라는 개념은 Fork/Join이라는 것에 기본적으로 포함되어 있다.  
CPU가 많이 있는 장비에서 계산을 효율적으로 해야할 때 유용하게 사용할 수 있다. 


## NIO도 잘 모르는데 NIO2가 나왔다.
> NIO2는 자바 7 이전의 File 클래스의 미흡한 점을 보완하여 등장하였다.  
> 자바에서 지금까지 다루지 않은 파일 속성을 다룰 수 있으며, 심볼릭 링크까지 처리할 수 있는 기능을 제공한다.  
> 또한 어떤 파일이 변경되었는지 쉽게 알 수 있는 WatchService라는 클래스도 제공한다.

### NIO2에서 File 클래스를 대체하는 클래스들
| 클래스         | 설명                                                                                                                                                                             | 
|-------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Paths       | 이 클래스에서 제공하는 static한 get() 메소드를 사용하면 Path라는 인터페이스 객체를 얻을 수 있다. 파일과 경로에 대한 정보를 갖고있다.                                                                                            |
| Files       | 기존 File 클래스에서 제공되던 클래스의 단점들을 보완한 클래스이다. 매우 많은 메소드를 제공하여 Path 객체를 사용하여 파일을 통제하는데 사용된다.                                                                                          |
| FileSystems | 현재 사용중인 파일 시스템에 대한 정보를 처리하는 데 필요한 메소드를 제공한다. Paths와 마찬가지로 이 클래스에서 제공되는 static한 getDefault() 메소드를 사용하면  <br/> 현재 사용중인 기본 파일 시스템에 대한 정보를 갖고있는 FileSystemdㅣ라는 인터페이스의 객체를 얻을 수 있다. |
| FileStore   | 파일을 저장하는 디바이스, 파티션, 볼륨 등에 대한 정보들을 확인하는데 필요한 메소드를 제공한다.                                                                                                                         |

## 변경되었는지 확인하는 WatchService 클래스도 추가되었어요
> WatchService는 쉽게 생각하면 문지기라고 보면 된다. 어떤 디렉터리 문 앞에서 지키고 있다가  
> 누군가 해당 디렉토리에서 파일을 생성하거나 수정하거나 삭제하면 WatchService를 사용하고 있는 클래스에게 알려준다.  
> WatchService는 감지가 필요한 이벤트를 정하고 해당 이벤트가 발생하면 추가작업을 처리할 수 있도록 해준다.  
> 모니터링과 비슷한 용도로 Daemon Thread 클래스 내에서 사용하는 것이 효율적이라 생각된다.

**lastModified()**  
기존의 lastModified() 메소드를 이용하여 파일의 수정을 감지할 수 있지만 lastModified를 사용하면 내부적으로 필요없는 작업이 많이 수행되기 때문에 리소스 낭비가 심하다.

## Fork/Join과 NIO2외에 추가 및 변경된 것들을 간단히 살펴보죠
### JDBC 4.1
- JDBC 4.1 버전에선 많은 업그레이드가 이뤄졌다. 그중 주목할 것은 `RowSetFactory`와 `RowSetProvider`라는 클래스가 추가되었다.
- `RowSet`이라는 인터페이스는 JDBC 1.4 부터 있었지만, RowSetFactory와 RowSetProvider를 사용하면 아주 쉽게 RowSet의 객체를 생성할 수 있다.

### TransferQueue추가
- 이 인터페이스는 어떤 메세지를 처리할 때 유용히게 사용할 수 있다. 
- TransferQueue는 Producer/Consumer 패턴을 따른 자바 컬렉션이다.
- SynchronousQueue의 기능을 일반화한 BlockingQueue를 확장한 것이다.
- BlockingQueue를 확장하였기 때문에 멀티 쓰레드에서 발생할 수 있는 동기화 문제를 해결할 수 있다.
- 한 스레드가 put() 메소드를 호출할 때 다른 스레드가 take() 메소드를 호출하면 put()이 끝날 때까지 대기해야 한다.


### Objects 추가
- compare(), equals(), hash(), hashCode(), toString()등의 static한 메소드를 제공
- 기존 Object와 비슷하지만 차이점은 null인 객체가 매개변수로 넘어와도 NullPointException이 발생하지 않는다.