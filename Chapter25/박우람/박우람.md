# 쓰레드는 개발자라면 알아두는 것이 좋아요

## Thread란?

<img src="./img/img.png" title="thread" alt="thread"/>

- Thread란 프로세스 내부에 생성되는 경량 프로세스이다.
- Thread는 프로세스의 일부 데이터 영역을 공유하여 사용할 수 있다.
- 생성된 Thread의 자원 공간은 독립적이다. 그리고 각 스레드는 독립적으로 수행된다.
- Thread는 프로세스 보다 생성비용이 굉장히 저렴하다. 프로세스를 여러개 생성하는 것보다 여러 스레드를 생성하는 것이 자원적으로 이득이다.


### Runnable 인터페이스와 Thread 클래스

- 쓰레드가 수행되는 우리가 구현해야할 메소드는 run()
- 쓰레드를 시작하는 메소드는 start()

**Thread**

- Thread 클래스를 상속받은 클래스는 쓰레드를 생성할 수 있다.
- Thread는 클래스이므로 다른 클래스와 상속관계를 맺은 클래스에게는 사용할 수 없다.
- 손쉽게 생성이 가능하다는 장점이 있다.

**Runnable**

- Runnable 인터페이스를 확장하면, 구현한 동작을 다른 쓰레드 객체에서 재사용할 수 있다.  (큰 의미없음)
- Runnable은 인터페이스이므로 구현할 클래스가 다른 클래스와 상속관계를 맺은 상태여도 문제가 되지 않는다.
- Runnable 인터페이스를 구현한 클래스 하나로는 쓰레드를 시작할 수 없다.
    - Thread를 시작하는 start() 메소드는 Thread 클래스가 보유하고 있음


### 많이 사용되고 있는 sleep() 메소드에 대해서 알아보자
> Thread에 static으로 선언된 메소드들은 해당 쓰레드를 위해 존재하는 것이 아니라 JVM에 있는 쓰레드를 관리하는 용도   
> 그러나 예외도 있다. 그 예외 중 하나가 sleep() 메소드이다.

| 리턴 타입       | 메소드 이름 및 매개 변수                | 설명                                                                           |
|-------------|-------------------------------|------------------------------------------------------------------------------|
| static void | sleep(long millis)            | 매개 변수로 넘어온 시간(1/1000초) 만큼 대기한다.                                              |
| static void | sleep(long millis, int nanos) | 첫 번째 매개 변수로 넘어온 시간 (1/1.000초)+ 두번째 매개 변수로 넘어온 시간 (1/1.000.000.000초) 만큼 대기한다. |

- Thread.sleep() 메소드를 호출하면 해당 스레드는 매개변수로 설정한 시간만큼 대기하게 된다.
- Thread.sleep() 메소드를 이용할 때는 try-catch로 항상 묶어줘야 한다. 

### Thread 클래스의 주요 메소드를 살펴보자
| 리턴 타입               | 메소드 이름 및 매개 변수               | 설명                                            |
|---------------------|------------------------------|-----------------------------------------------|
| void                | run()                        | Thread를 시작하기 위해 구현해야하는 메소드                    |
| long                | getId()                      | 쓰레드의 고유 아이디를 리턴한다. 아이디는 JVM에서 자동으로 생성한다.      |
| String              | getName()                    | 쓰레드의 이름을 리턴한다.                                |
| void                | setName(String name)         | 쓰레드의 이름을 지정한다.                                |
| int                 | getPriority()                | 쓰레드의 우선순위를 리턴한다.                              |
| void                | setPriority(int newPriority) | 쓰레드의 우선순위를 지정한다.                              |
| boolean             | isDaemon()                   | 쓰레드가 데몬 쓰레드인지 확인한다.                           |
| void                | setDaemon(boolean on)        | 쓰레드를 데몬 쓰레드로 변경한다. 단 쓰레드가 시작되기 전에 변경하여야 적용된다. |
| StackTraceElement[] | getStackTrace()              | 쓰레드의 스택 정보를 확인한다.                             |
| Thread.State        | getState()                   | 쓰레드의 상태를 확인한다.                                |
| ThreadGroup         | getThreadGroup()             | 쓰레드의 그룹을 확인한다.                                |

### UserThread와 DaemonThread
**UserThread**
- UserThread는 해당 쓰레드가 종료되지 않으면 JVM이 해당 쓰레드가 종료될 때까지 기다린다.

**DaemonThread**
- DaemonThread는 해당 쓰레드가 아직 실행 중이라더라도 실행 중인 다른 일반 쓰레드가 없다면 종료된다.
- 주로 모니터링같은 부가적인 작업을 실행할 때 사용한다.
- setDaemon() 메소드로 사용자 스레드를 데몬 스레드로 변경할 수 있다.

### 자바 쓰레드의 상태
 - NEW : 쓰레드가 객체가 생성된 상태
 - RUNNABLE : 쓰레드가 실행중인 상태
 - BLOCKED : 쓰레드가 실행 중지 상태이며, 모니터 락이 풀리기를 기다리는 상태
 - WAITING : 쓰레드가 대기중인 상태
 - TIME_WAITING : 특정 시간만큼 쓰레드가 대기 중인 상태
 - TERMINATED : 쓰레드가 종료된 상태

### 쓰레드를 통제하는 메소드
| 리턴 타입        | 메소드 이름 및 매개 변수               | 설명                                                                         |
|--------------|------------------------------|----------------------------------------------------------------------------|
| Thread.State | getState()                   | 쓰레드의 현재 상태를 반환하는 메소드                                                       |
| void         | join()                       | 수행중인 쓰레드가 중지할 때까지 기다린다. 쓰레드의 수행이 중지되면 join() 다음 라인에 있는 코드를 실행한다.           |
| void         | join(long millis)            | 매개 변수에 지정된 시간만큼(1/1.000초) 대기한다.                                            |
| void         | join(long millis, int nanos) | 첫 번째 매개 변수에 지정된 시간 (1/1.000초) + 두번째 매개변수에 지정된 시간(1/1.000.000.000초)만큼 대기한다. |
| void         | interrupt()                  | 수행중인 쓰레드에 중지 요청을 한다.                                                       |


### Object 클래스에 선언된 쓰레드와 관련있는 메소드들

| 리턴 타입 | 메소드 이름 및 매개 변수                | 설명                                                               |
|-------|-------------------------------|------------------------------------------------------------------|
| void  | wait()                        | 다른 쓰레드가 Object 객체에 대한 notify() 메소드나 notifyAll 메소드를 호출할 때까지 대기한다. |
| void  | wait(long timeout)            | wait() 메소드와 동일한 기능을 제공한다. 매개변수에 지정된 시간만큼 대기한다.(1/1000초)단위        |
| void  | wait(long timeout, int nanos) | wait() 메소드와 동일한 기능을 제공한다. timeout(밀리초) + nanos(나노초) 만큼 대기한다.     |
| void  | notify()                      | Object 객체의 모니터에 대기하고 있는 단일 쓰레드를 꺠운다.                             |
| void  | notifyAll()                   | Object 객체의 모니터에 대기하고 있는 모든 쓰레드를 깨운다.                             |