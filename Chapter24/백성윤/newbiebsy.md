# Map

> 자바에서 Map 은 Key(키) Value(값) 로 이루어져 있다. 여기서 "Key"는 Map에서 다른 데이터와 구분하기 위한 값이다.   
> Map 의 대표적인 특징은 아래와 같다.
> - 모든 데이터는 키와 값이 존재한다.
> - 키가 없이 값만 저장될 수는 없다. (값 없이 키만 저장할 수도 없다.)
> - 키는 Map에서 고유해야 한다. (값은 중복되어도 상관 없다.)
> 
> Map은 java.util 패키지의 Map이라는 이름의 인터페이스로 선언되어 있고, 구현해 놓은 클래스들도 많이 있다. 

### Map 을 구현한 주요 클래스
> Map 인터페이스를 구현한 클래스 중에 대표적인 것들은 아래와 같다.
> - Hashmap
> - TreeMap
> - LinkedHashMap
> - Hashtable
>
> Hashtable 클래스는 Map 인터페이스를 구현하기는 했지만 일반적인 Map 인터페이스를 구현한 클래스들과는 다르다.
> - Map 은 Collection view 를 사용하지만, Hashtable 은 Enumeration 객체를 통해서 데이터를 처리한다.
> - Map 은 키, 값, 키-값 쌍으로 데이터를 순환하여 처리할 수 있지만, Hashtable 은 이 중에서 키-값 쌍으로 데이터를 순환하여 처리할 수 없다.
> - Map 은 이터레이션을 처리하는 도중에 데이터를 삭제하는 안전한 방법을 제공하지만, Hashtable 은 그러한 기능을 제공하지 않는다.
> 
> 크게 봤을 때 Map 인터페이스와 Hashtable 클래스의 차이는 이 정도다.
> 그런데, HashMap 클래스와 Hashtable 클래스는 다음과 같은 차이가 있다.

| 기능                  | HashMap | Hashtable |
|---------------------|---------|-----------|
| 키나 값에 null 저장 가능 여부 | 가능      | 불가능       |
| 여러 쓰레드 안전 여부        | 불가능     | 가능        |

> 이러한 차이가 발생한 이유는 Hashtable 은 JDK1.0부터 만들어져 사용되다가 JDK1.2 에서 만들어진 Map 인터페이스에 맞추어 보완되었기 때문이다.   
> 위에서 소개된 클래스 중에서 Hashtable을 제외한 Map으로 끝나는 클래스들은 여러 쓰레드에서 동시에 접근하여
> 처리할 필요가 있을 때에는 Collections 클래스의 synchronizedMap(Map<K,V m) 메소드를 이용해야한다. 혹은 이름에 Concurrent 가 포함되어 있어야만 쓰레드에 안전하게 사용할 수 있다.

#### HashMap
> HashMap 객체를 생성할 때에는 대부분 매개 변수가 없는 생성자를 사용한다. 하지만 담을 데이터가 많은 경우에는 초기 크기를 지정해 주는 것을 권장한다.   
> 추가로 HashMap 의 키는 기본 자료형과 참조 자료형이 모두 될 수 있다. 때문에 직접 어떤 클래스를 만들어
> 그 클래스를 키로 사용한 다면 ***Object 클래스의 hashCode(), equals() 메소드를 잘 구현해 놓아야만 한다.***
> 
> HashMap 에서 존재하지 않는 키로 get() 을 할 경우에는 null 을 반환한다. 또 이미 존재하는 키로 put() 을 할 경우 값을 새로운 값으로 바꾼다.   
> 
> 무작정 get() 으로 해당 키와 값이 존재하는지 확인하는 것보다 containKey() 나 containsValue() 를 사용하는 것이 효과적이다.

#### 정렬된 키의 목록을 원한다면 TreeMap!
> 정렬된 키를 원한다면 HashMap 보다는 TreeMap 을 사용해야한다   
> 
> TreeMap 은 숫자 > 알파벳 대문자 > 알파벳 소문자 > 한글 순으로 키를 정렬한다. (String 과 같은 문자열이 저장되는 순서이며, 숫자나 객체가 저장될 때에는 그 순서가 달라진다.)   
> 매우 많은 데이터를 보관하여 처리할 때에는 키를 정렬하기 때문에 HashMap 보다 느리다. 하지만 적은 양의 데이터를 처리하고, 정렬해야 한다면 TreeMap 이 더 유리하다.
> 
> TreeMap이 키를 정렬할 수 있는 것은 SortedMap 이라는 인터페이스를 구현했기 때문이다. (가장 앞에 있는, 가장 뒤에 있는, 특정 키 앞에 있는, 특정 키 뒤에 있는 등의 메소드를 제공한다.)

#### Map을 구현한 Properties 클래스
> Properties 클래스는 Hashtable 을 확장하였다. 따라서, Map 인터페이스에서 제공하는 모든 메소드를 사용할 수 있다. 기본적으로 자바에서는 시스템의 속성을 이 클래스를 사용하여 제공한다.   
> getProperties() 메소드를 사용하면 Properties 타입의 객체를 반환한다. 이 객체는 Map에 있는 데이터를 확인하는 방법과 같다.   
> 
> Hashtable을 확장한 클래스이기 때문에 키와 값 형태로 데이터가 저장되어 있다.   
> Properties 클래스는 파일을 읽고, 쓰는 메소드가 존재해 IO를 사용할 때 많이 활용된다.